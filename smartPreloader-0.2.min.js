/**
 * Smart Prealoder
 * 
 * This plugin will preload links before a user clicks on it.
 * As this URLs will be cached, the user will experiance a better performance.
 * 
 * @param string selector
 * @param int perimeter
 * @param function getUrl
 * @returns {SmartPreloader}
 */

function SmartPreloader(e){this.config=Object.assign({selector:"a[href]",perimeter:0,flat:"data-smart-preloaded",getUrl:function(){return this.href}},e),this.init()}SmartPreloader.prototype={_getDistance:function(e,t){let i=t.getBoundingClientRect(),r=i.left,a=i.top,n=r+i.width,o=a+i.height,g=Math.min(e.pageX,n)>=Math.max(e.pageX,r),s=Math.min(e.pageY,o)>=Math.max(e.pageY,a),c=(g?e.pageX:n<e.pageX?n:r)-e.pageX,l=(s?e.pageY:o<e.pageY?o:a)-e.pageY;return Math.sqrt(c*c+l*l)},_load:function(e){e.setAttribute(this.config.flag,!0),fetch(this.config.getUrl.apply(e))},init:function(){document.querySelectorAll(this.config.selector).forEach(e=>{e.setAttribute(this.config.flag,!1),0===this.config.perimeter&&e.addEventListener("mouseover",this._load(e),{once:!0})}),this.config.perimeter>0&&document.addEventListener("mousemove",e=>{document.querySelectorAll(this.config.selector+"["+this.config.flag+'="false"]').forEach(t=>{this._getDistance(e,t)<=this.config.perimeter&&this._load(t)})})}};